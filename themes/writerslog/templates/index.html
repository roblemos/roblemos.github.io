{% extends "base.html" %}

{% block title %}{{ SITENAME }}{% endblock %}

{% block content %}
<section class="section pt-5 pb-6">
  <div class="container">
    <div class="columns is-desktop is-multiline">
      <!-- Main Posts Area -->
      <div class="column is-8-desktop">
        {% for article in articles_page.object_list %}
        <article class="columns is-multiline is-justify-content-center mb-6">
          {% if article.metadata.featured_image %}
          <div class="column is-12">
            <div class="post-slider">
              <img loading="lazy" src="{{ SITEURL }}/{{ article.metadata.featured_image }}" alt="{{ article.title }}">
            </div>
          </div>
          {% endif %}
          <div class="column is-12">
            <h3>
              <a class="post-title" href="{{ SITEURL }}/{{ article.url }}">
                {{ article.title }}
              </a>
            </h3>
            <ul class="list-inline post-meta mb-4">
              <li class="list-inline-item">
                <i class="ti-user mr-2"></i> {{ article.author or AUTHOR }}
              </li>
              <li class="list-inline-item">
                Date : {{ article.date.strftime('%B %d, %Y') }}
              </li>
              <li class="list-inline-item">
                {% if article.category %}
                <li class="list-inline-item">
                  Category :
                  <a href="{{ SITEURL }}/category/{{ article.category.slug }}.html">{{ article.category.name }}</a>
                </li>
                {% endif %}
              </li>
              {% if article.tags %}
              <li class="list-inline-item">
                Tags :
                {% for tag in article.tags %}
                  <a href="{{ SITEURL }}/tag/{{ tag.slug }}.html">{{ tag.name }}</a>{% if not loop.last %}, {% endif %}
                {% endfor %}
              </li>
              {% endif %}
            </ul>
            <p>{{ article.summary }}</p>
            <a href="{{ SITEURL }}/{{ article.url }}" class="btn btn-outline-primary">Continue Reading</a>
          </div>
        </article>
        {% endfor %}

        {% if articles_page.has_other_pages() %}
        <nav class="pagination is-centered mt-6" role="navigation" aria-label="pagination">
          {% if articles_page.has_previous() %}
            <a class="pagination-previous" href="{{ SITEURL }}/{{ articles_previous_page.url }}">Previous</a>
          {% else %}
            <a class="pagination-previous" disabled>Previous</a>
          {% endif %}

          {% if articles_page.has_next() %}
            <a class="pagination-next" href="{{ SITEURL }}/{{ articles_next_page.url }}">Next</a>
          {% else %}
            <a class="pagination-next" disabled>Next</a>
          {% endif %}
        </nav>
        {% endif %}
      </div>

      <!-- Sidebar -->
      <aside class="column is-4-desktop">
        <!-- Search -->
        <div class="widget">
          <h5 class="widget-title"><span>Search</span></h5>
          <form action="{{ SITEURL }}/search.html" method="get" class="widget-search">
            <input type="search" name="q" placeholder="Type &amp; Hit Enter...">
            <button type="submit"><i class="ti-search"></i></button>
          </form>
        </div>

        <!-- Categories -->
        <div class="widget">
          <h5 class="widget-title"><span>Categories</span></h5>
          <ul class="list-unstyled widget-list">
            {% for category, articles in categories %}
              <li>
                <a class="is-flex" href="{{ SITEURL }}/category/{{ category.slug }}.html">
                  {{ category.name }} <small class="ml-auto">({{ articles|length }})</small>
                </a>
              </li>
            {% endfor %}
          </ul>
        </div>

        <!-- Tags -->
        <div class="widget">
          <h5 class="widget-title"><span>Tags</span></h5>
          <ul class="list-inline widget-list-inline">
            {% for tag, articles in tags %}
              <li class="list-inline-item">
                <a href="{{ SITEURL }}/tag/{{ tag.slug }}.html">{{ tag.name }}</a>
              </li>
            {% endfor %}
          </ul>
        </div>

        <!-- Latest Articles -->
        <div class="widget">
          <h5 class="widget-title"><span>Latest Articles</span></h5>
          <ul class="list-unstyled widget-list">
            {% for article in articles[:3] %}
            <li class="media widget-post is-align-items-center">
              <a href="{{ SITEURL }}/{{ article.url }}">
                {% if article.metadata.featured_image %}
                <img loading="lazy" src="{{ SITEURL }}/{{ article.metadata.featured_image }}">
                {% endif %}
              </a>
              <div class="ml-4">
                <h5 class="h6 mb-0">
                  <a href="{{ SITEURL }}/{{ article.url }}">{{ article.title }}</a>
                </h5>
                <small>{{ article.date.strftime('%B %d, %Y') }}</small>
              </div>
            </li>
            {% endfor %}
          </ul>
        </div>
      </aside>
    </div>
  </div>
</section>
{% endblock %}
